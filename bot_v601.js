!function(_window){const room=HBInit({roomName:"ðŸ‘½ My Haxball Room",public:!0,maxPlayers:12,noPlayer:!0});room.setTeamsLock(!0),room.setScoreLimit(3),room.setTimeLimit(5),room.setDefaultStadium("Easy"),room.startGame();const po={},pa=[],data={e:["admin1","admin2","admin3","admin4"],a:!0,l:!0,t:[1,4,4],i:{r:"https://raw.githubusercontent.com/uzayyli/Haxball-Headless-Bot/main/example_maps.json",o:{}},n:[0,0],s:null,u:null,security:{bl_name:[],bl_namepart:[],bl_auth:[],bl_conn:[],c:!1,password:null,d:[],b:[],f:!1}},lib={say:(e,a)=>{room.sendAnnouncement(e,a,a?10151397:9633550)},p:(e,a=1)=>{const l=pa,t=room.sendAnnouncement;let i,r;for(i=l.length-1;0<=i;i--)(r=l[i]).k>=a&&t(e,r.id,16768768)},mute:(e,a,l=null,t=!0)=>{e.log.h=Date.now()+6e4*a,t&&lib.say(`ðŸ”• ${e.name} ${0<a?`${a} dakika susturuldu`:"artÄ±k konuÅŸabilir"}${l?` (${l})`:""}`)},$:(e=null)=>{if(null===e||e.length<1)return null;if("#"===e[0])return po[parseInt(e.substring(1))];e=e.toLowerCase();let a,l,t,i=null;for(a=pa.length-1;0<=a;a--){if(l=pa[a],t=l.name.toLowerCase(),t===e)return l;t.includes(e)&&(i=l)}return i},g:()=>{let r,o=data.t;var n,s=o[0];if(0!==s){const m=[o[1],o[2]],u=[[],[],[],[],[]];o=Math;const c=o.floor,d=o.random,b=o.abs;pa.map(e=>{u[e.team].push(e)});{let e;const f=u[4];for(r=f.length-1;0<r;r--)e=c(d()*(r+1)),[f[r],f[e]]=[f[e],f[r]];for(r=f.length-1;0<=r;r--)e=f[r],u[0].push(e),e.team=0}let e,a,l=u[0].length,t=u[1].length,i=u[2].length;for(;0<l&&(2!==s||1!==l||t!==i)&&!(t>=m[0]&&i>=m[1]);)a=m[0]-t<=0?2:m[1]-i<=0?1:t===i?1+c(2*d()):t>i?2:1,e=u[0][0],room.setPlayerTeam(e.id,a),e.team=a,u[a].push(e),u[0].splice(0,1),l--,t=u[1].length,i=u[2].length;if(o=t-i,1<b(o)){const p=0<o?1:2,y=3-p,k=u[p];for(o=b(o);1<o&&!(u[y].length>=m[y-1]);)n=c(d()*k.length),e=k[n],k.splice(n,1),u[y].push(e),room.setPlayerTeam(e.id,y),e.team=y,o=u[1].length-u[2].length}}},L:e=>{room.stopGame();let a=data,l="Tebrikler ";const t=[],i=e.red>e.blue?1:2;switch(l+=`${1==i?"kÄ±rmÄ±zÄ±":"mavi"}!`,a.t[0]){case 0:break;case 1:t.push(1,2);break;case 2:t.push(3-i),a=a.n,a[3-i-1]=0,2<++a[i-1]&&(a[i-1]=0,t.push(i),l+=" ÃœÃ§ maÃ§lÄ±k seri, takÄ±mlar karÄ±lÄ±yor")}lib.say(l),lib.mix(t),setTimeout(room.startGame,1e3)},mix:a=>{(a=a||[1,2]).length&&(pa.map(e=>{-1!==a.indexOf(e.team)&&(e.team=4,room.setPlayerTeam(e.id,0))}),lib.g())},w:{eval:{M:(p,a)=>{eval(a.join(" "))},_:"test",N:4,help:null,z:5,O:!0},help:{M:(l,t)=>{var i=lib.w;let r;if(t.length){var e,a=t[0];if(a in i?r=i[a]:a in(e=lib.T)&&(r=i[e[a]]),!r)return lib.say("BÃ¶yle bir komut yok",l.id),!1;r.help&&r.N<=l.k&&lib.say(r.help,l.id)}else{let e=[],a=Object.keys(i);for(t=0;t<a.length;t++)r=i[a[t]],r.N<=l.k&&!r.O&&e.push(a[t]);e.length&&lib.say("komutlar: "+e.join(", "),l.id),lib.say("detaylÄ± bilgi iÃ§in: .help [komut]",l.id)}},_:"public",N:0,help:null,z:10},v:{M:()=>{lib.say("v6.0.1b")},_:"public",N:0,help:null,z:20},say:{M:(e,a)=>{lib.say(e.name+": "+a.join(" "))},_:"chat",N:1,help:null,z:5},admin:{M:(e,a)=>{var l=data.e,t=a[0],i=!!a[1];let r;for(r=0;r<l.length;r++)if(t===l[r]){e.k=r+1,room.setPlayerAdmin(e.id,!i),lib.p(`${e.name} ${i?"-gizli- ":""}admin level ${r+1}`,r+1);break}},_:"system",N:0,help:"admin [password] or admin [password] hidden",z:20},setadminlevel:{M:(e,a)=>{if(a.length<2)return-1;const l=lib.$(a[0]);if(!l)return-2;let t=parseFloat(a[1]),i=!!a[2];if(l.k<4&&4<=t&&(t=3),!(e.id===l.id&&4<=l.k)&&(t>e.k||t<l.k&&l.k>e.k))return lib.say("buna yetkiniz yok",e.id);l.k=t,room.setPlayerAdmin(l.id,0<t&&!i),lib.p(`${l.name} ${i?"-gizli- ":""}admin level ${t} (${e.name})`,t)},_:"system",N:2,help:"setadminlevel [player] [level=2] [hidden=false]",z:20},debug:{M:(e,a)=>{const l=lib.say;let t,i;for(l("Data: "+JSON.stringify(data),e.id),l("Players:",e.id),i=pa,t=0;t<i.length;t++)l(JSON.stringify(i[t]),e.id)},_:"system",N:4,help:null,z:5,O:!0},mute:{M:(e,a)=>{if(a.length<2)return-1;var l=lib.$(a[0]);if(!l)return-2;let t=Math.min(parseFloat(a[1]),10);(isNaN(t)||t<0)&&(t=0),lib.mute(l,t,e.name,!0)},_:"chat",N:2,help:"mute [player] [minutes=1]",z:3},muteall:{M:(e,a)=>{let l=Math.min(parseFloat(a[0]),10);(isNaN(l)||l<0)&&(l=0);const t=lib.mute;for(let e=pa.length-1;0<=e;e--)t(pa[e],l,null,!1);lib.say(`ðŸ”• herkes ${0<l?`${l} dakika susturuldu`:"konuÅŸabilir"} (${e.name})`)},_:"chat",N:2,help:"muteall [minutes=1]",z:3},afk:{M:(e,a)=>{const l=a.length&&1<e.k?lib.$(a[0]):e;if(!l)return-2;var t=3===l.team,a=t?0:3;room.setPlayerTeam(l.id,0),l.team=a,lib.g(),lib.say(`${l.name} ${t?"oyuna geri dÃ¶ndÃ¼":"AFK"} ${e.id===l.id?"":`(${e.name})`}`)},_:"public",N:0,help:"afk or afk [player]: toggles player's AFK status",z:30},mix:{M:(e,a)=>{lib.mix(),lib.say(`${e.name} takÄ±mlarÄ± kardÄ±`)},_:"game",N:1,help:"mixes teams",z:5},remix:{M:(e,a)=>{room.stopGame(),lib.mix(),lib.say(`${e.name} takÄ±mlarÄ± kardÄ±`),data.s=setTimeout(room.startGame,1e3)},_:"game",N:1,help:"mixes teams and restarts game",z:20},restart:{M:(e,a)=>{room.stopGame(),data.s=setTimeout(room.startGame,1e3),lib.say(`${e.name} oyunu baÅŸtan baÅŸlattÄ±`)},_:"game",N:1,help:null,z:10},gamemode:{M:(e,a)=>{if(!a.length)return-1;const l=a[0],t=data;if("manual"===l)t.t[0]=0;else{a=a[1];if(a){if(2!==a.length)return-1;t.t[0]=2}else t.t[0]=1;a=l.split("v");if(a.length<2)return-1;t.t[1]=a[0],t.t[2]=a[1]}lib.say("Oyun modu: "+(0===t.t[0]?"manual":t.t[1]+"v"+t.t[2]+" "+(2===t.t[0]?"YS":"random")+` (${e.name})`)),lib.mix()},_:"game",N:2,help:"gamemode manual/4v4/3v3 ys/4v4 ys/etc",z:10},kick:{M:(e,a)=>{if(!a.length)return-1;var l=lib.$(a[0]);if(!l)return-2;a=`${e.name}${1<a.length?`: ${a[1]}`:""}`;room.kickPlayer(l.id,a,!1)},_:"security",N:2,help:"kick [player] [reason]",z:5},ban:{M:(e,a)=>{if(!a.length)return-1;var l=lib.$(a[0]);if(!l)return-2;a=`${e.name}${1<a.length?`: ${a[1]}`:""}`;room.kickPlayer(l.id,a,!0)},_:"security",N:2,help:"kick [player] [reason]",z:5},blacklist:{M:(e,a)=>{const l=a[0],t=data.security;if(-1===["name","namepart","auth","conn"].indexOf(l))return-1;let i=a[1];if(!i)return lib.say(`${"bl_"+l}: ${JSON.stringify(t["bl_"+l])}`,e.id);"clear"===i?(t["bl_"+l]=[],lib.p(`cleared ${"bl_"+l} (${e.name})`,3)):("namepart"===l&&(i=i.toLocaleLowerCase()),t["bl_"+l].push(i),lib.p(`added '${i}' to ${"bl_"+l} (${e.name})`))},_:"security",N:3,help:"blacklist name/namepart/auth/conn [query]/clear",z:5},security:{M:(e,a)=>{if(!a.length)return-1;const l=data.security,t=lib.p;let i,r;switch(a[0]){case"recentbans":i=l.b;break;case"recentplayers":i=l.d;break;case"captcha":if(a.length<2)return-1;var o=-1!==["on","1"].indexOf(a[1]);return room.setRequireRecaptcha(o),t(`Captcha is ${o?"on":"off"} (${e.name})`,3);case"password":if(a.length<2)return-1;o=a[1],o=-1!==["off","null",""].indexOf(o)?null:"random"===o?Math.floor(1e11*Math.random()).toString(16):o;return room.setPassword(o),lib.p(`${e.name} `+(o?`set room password: ${o}`:"cleared room password"),3)}let n,s;1<a.length&&(n=a[1]),2<a.length&&(s=a[2]),r=n&&s?i.filter(e=>e[n]===s):i.slice(-(n||5)),lib.say(JSON.stringify(r),e.id)},_:"security",N:3,help:"security recentbans/recentplayers [key/maxNum] [value] or security captcha/password [on/off/value]",z:5},clearban:{M:(e,a)=>{const l=data.security.b,t=room.clearBan;let i,r=0;if(a.length<1||"all"===a[0])for(i=l.length-1;0<=i;i--)t(l[i].id),l.splice(i,1),r++;else{var o=a[0],n=a[1];if(-1===["id","name"].indexOf(o))return-1;for(i=l.length-1;0<=i;i--)l[i][o].toString()===n&&(t(l[i].id),l.splice(i,1),r++)}r&&lib.p(`${r} ban temizlendi (${e.name})`,3)},_:"security",N:3,help:"clearban [=all] or clearban [key] [value]",z:10},maps:{M:(e,a)=>{const l=data.i;3<e.k&&a.length?"fetch"===a[0]&&(a[1]&&a[1].length&&(l.r=a[1]),fetch(l.r).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText})}).then(function(e){l.o=e}).catch(e=>{console.log(e)}),lib.p(`${e.name} maplarÄ± fetchledi`,4)):lib.say(Object.keys(l.o).join(", "),e.id)},_:"game",N:1,help:"maps (fetch [newUrl]): lists or fetches stadiums",z:20},load:{M:(e,a)=>{if(!a.length)return-1;const l=data.i.o,t=a[0].toLowerCase(),i=Object.keys(l);let r,o,n=null;for(r=i.length-1;0<=r;r--){if(o=i[r].toLowerCase(),o===t){n=i[r];break}o.includes(t)&&(n=i[r])}if(!n)return lib.say("BÃ¶yle bir map yok",e.id);const s=l[n];let m=s.hbs;"string"!=typeof m&&(m=s.hbs=JSON.stringify(m)),room.stopGame(),room.setCustomStadium(m),s.m&&s.m.length?data.u=s.m:data.u=null,lib.say(`${e.name} loaded ${n}`),data.u&&lib.say(data.u),room.startGame()},_:"game",N:1,help:"load [stadiumName]",z:20},m:{M:(e,a)=>{const l=data,t=!!a.length;var i;t?(i=a[0]).length&&"null"!==i&&"clear"!==i?(lib.p(`${e.name} set welcome message`,2),lib.say(l.u=a.join(" "))):(lib.p(`${e.name} cleared welcome message`,2),l.u=null):!l.u||l.u.length<1?lib.say("welcome message is null",e.id):lib.say(l.u)},_:"chat",N:2,help:"m [msg]: sets or prints auto message",z:5},avatar:{M:(e,a)=>{if(a.length<2)return-1;let l=a[0];if("all"===l)l=pa;else{var t=lib.$(l);if(!t)return-2;l=[t]}let i=a[1];"clear"===i?i=null:"default"===i&&(i="ðŸŽƒ");let r;for(r=l.length-1;0<=r;r--)room.setPlayerAvatar(l[r].id,i);1===l.length?lib.p(i?`${e.name} set ${l[0].name}'s avatar to ${i}`:`${e.name} cleared ${l[0].name}'s avatar`,2):lib.p(i?`${e.name} set all avatars to ${i}`:`${e.name} cleared all avatars`,2)},_:"game",N:2,help:"avatar [player]/all default/clear/[avatar]",z:10},ids:{M:(e,a)=>{room.sendAnnouncement(pa.map(e=>`[${e.id}] ${e.name}`).join(", "))},_:"public",N:0,help:"shows player IDs",z:10}},T:{"yardÄ±m":"help",komutlar:"help",gm:"gamemode"}};room.onPlayerJoin=e=>{const t=e.id,i=e.name,r=e.auth,o=e.conn;let n;{const u=i.toLocaleLowerCase();let e=pa;for(n=e.length-1;0<=n;n--)if(e[n].name.toLocaleLowerCase()===u)return room.kickPlayer(t,"Odada aynÄ± adlÄ± bir oyuncu var.",!1);let a=!1,l=data.security;var s;if(!l.f)for(n=e.length-1;0<=n;n--)if((s=e[n].log).auth===r||s.conn===o)return room.kickPlayer(t,"Ã‡oklu giriÅŸ yassah",!1);for(e=l.bl_name,n=e.length-1;0<=n;n--)if(e[n]===i){a=!0;break}if(!a)for(e=l.bl_namepart,n=e.length-1;0<=n;n--)if(u.includes(e[n])){a=!0;break}if(!a)for(e=l.bl_auth,n=e.length-1;0<=n;n--)if(e[n]===r){a=!0;break}if(!a)for(e=l.bl_conn,n=e.length-1;0<=n;n--)if(e[n]===o){a=!0;break}if(a)return room.kickPlayer(t,"blacklist",!0)}n=Date.now();const a={id:t,name:i,team:0,k:0,log:{auth:r,conn:o,h:-(n+1e4),B:0,D:0,P:n+5e3}};po[t]=a,pa.push(a);let l=null;{const c=data.security.d,n=c.findIndex(e=>e.conn===o||e.auth===r);var m;-1!==n&&(m=c[n],l=m.name!==i?m.name:null,c.splice(n,1),0<m.h&&(a.log.h=m.h),m.P>a.log.P&&(a.log.P=m.P)),c.push({id:t,name:i,auth:r,conn:o,h:a.log.h,P:a.log.P}),30<c.length&&c.splice(0,1)}lib.say(`HoÅŸ geldin ${e.name}! ${l?`(Ã–nceki ad: ${l})`:""}`),lib.g(),n=data.u,n&&n.length&&lib.say(n,t)},room.onPlayerLeave=l=>{const t=l.id,i=po[t];if(i){let e,a=pa;for(delete po[l.id],e=a.length-1;0<=e;e--)if(a[e].id===t){a.splice(e,1);break}a=data.security.d,e=a.findIndex(e=>e.id===t),-1!==e?(l=i.log,Object.assign(a[e],{h:l.h,P:l.P})):(a.push({id:t,name:i.name,auth:i.auth,conn:i.conn,h:i.log.h,P:i.log.P}),30<a.length&&a.splice(0,1)),lib.g()}},room.onPlayerTeamChange=(e,a)=>{if(a){const l=po[e.id];if(3===l.team&&0<e.team)return room.setPlayerTeam(e.id,0),lib.say(`${e.name} AFK!`,a.id);l.team=e.team}},room.onPlayerAdminChange=(e,a)=>{if(a){const l=po[e.id],t=po[a.id];if(!e.admin&&l.k>t.k)return lib.p(`${a.name} is not authorized to demote ${e.name}`,t.k),room.setPlayerAdmin(e.id,!0);l.k=e.admin?Math.max(1,l.k):0}},room.onGameStart=()=>{clearTimeout(data.s)},room.onGameStop=e=>{e&&clearTimeout(data.s)},room.onTeamVictory=e=>{data.s=setTimeout(()=>{lib.L(e)},3e3)},room.onPlayerKicked=(e,a,l,t)=>{if(t=t||{id:0,name:"bot"},l){const i=data.security.b;i.push({id:e.id,name:e.name,F:a,S:t.id,A:t.name}),30<i.length&&i.splice(0,1)}t=po[t.id];t&&t.k<2&&(l&&(room.clearBan(e.id),lib.say(`${e.name} ban kaldÄ±rÄ±ldÄ±`)),room.kickPlayer(t.id,"Oyuncu kickleme yetkiniz yok",!1))},room.onStadiumChange=(e,a)=>{a&&(data.u=null)},room.onPlayerChat=(l,t)=>{const i=(l=po[l.id]).log,r=Date.now();if(l.k<1){let e,a=i.h;if(a<0&&(-a<r?i.h=0:15<t.length&&(a=i.h=-a)),a>r)return lib.say(`${Math.ceil((a-r)/1e3)} saniye sonra yazÄ± yazabilirsiniz.`,l.id),!1;if(e=r-i.B,5e3<e)i.D=0;else if(e<1100&&1<++i.D)return i.D=0,lib.mute(l,1,"spam"),!1;i.B=r}let e=t[0];if(("!"===e||"."===e)&&(e=t[1],"."!==e&&"d"!==e))try{lib.p(`${l.name}: ${t}`,5);const o=t.substring(1).split(" "),n=o[0].toLowerCase();let e=lib.w[n];if(!e){if(e=lib.T[n],!e)return lib.say("BÃ¶yle bir komut yok",l.id),!1;e=lib.w[e]}if(l.k<1){if(i.P>=r)return lib.say("LÃ¼tfen komutlarÄ± tekrar kullanmak iÃ§in biraz bekleyin",l.id),!1;i.P=r+1e3*(e.z||5)}if(e.N>l.k)return lib.say("Bu komutu kullanmak iÃ§in yetkiniz yok",l.id),!1;var a=e.M(l,o.slice(1));return a?(-1===a?(lib.say("YanlÄ±ÅŸ argÃ¼man sayÄ±sÄ±. DoÄŸru kullanÄ±m:",l.id),e.help&&lib.say(e.help,l.id)):-2===a&&lib.say("BÃ¶yle bir oyuncu yok. LÃ¼tfen oyuncu adÄ±nÄ±n bir kÄ±smÄ±nÄ± ya da ID'sini #123 ÅŸeklinde girin",l.id),!1):!1}catch(e){return lib.p(l.name+", bir sorun oldu: "+t),lib.p(e.message+" @"+e.lineNumber),!1}};{const expose2window=x=>{_window[x]=eval(x)};let i,varList=["room","po","pa","data","lib"];for(i=varList.length-1,console.log(`exposed ${i} variables to window: ${varList.join(", ")}`);0<=i;i--)expose2window(varList[i])}lib.w.maps.M({name:"bot",k:4},["fetch"])}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);